"0",""
"0","fsc_nw %>% "
"0","  group_by(state, township, admin3_pcode_old) %>% "
"0","  summarise(beneficiaries = sum(new_beneficiaries, na.rm = TRUE)) %>%"
"0","  left_join(pin %>% select(admin3_pcode, target = fs_targeted), by = c(""admin3_pcode_old"" = ""admin3_pcode""), .groups = ""drop"") %>%"
"0","  ungroup() %>% "
"0","  # this sorts the table"
"0","  arrange(desc(beneficiaries)) %>% "
"0","  mutate(pc_beneficiaries = round(beneficiaries / sum(beneficiaries) * 100, digits = 2),  "
"0","         pc_reached = round(beneficiaries / target * 100, digits = 2), "
"0","         pc_reached = ifelse(is.infinite(pc_reached), 100, pc_reached), "
"0","         target = round(target)) %>% "
"0","  # select can also rename columns "
"0","  select(state, township, target, beneficiaries, `%_reached` = pc_reached, `%_beneficiaries` = pc_beneficiaries) %>% "
"0","  head(11) %>% "
"0","  # remember that kable does not work in a word format, so use pander instead"
"0","  # pander(caption = ""Top 11 towwnships reached by number of beneficiaries"")"
"0","  kable(caption = ""Top 11 townships reached by number of beneficiaries"", "
"0","        format.args = list(big.mark = "","")) %>%  "
"0","  footnote(""Only townships with more than 1% of the total beneficiaries are shown"", "
"0","           general_title = """") %>%  "
"0","  kable_classic_2(""striped"")"
"1","`summarise()` has grouped output by 'state', 'township'. You can override using the `.groups` argument.
"
